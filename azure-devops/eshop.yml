---
stages:
  - stage: dotnet
    jobs:
      - job: dotnetbuild
        displayName: build using dotnet
        pool:
          vmImage: ubuntu-22.04
        steps:
          - task: DotNetCoreCLI@2
            inputs:
              command: 'build'
              projects: eShopOnWeb.sln
  - stage: docker
    dependsOn: dotnet
    jobs:
      - job: dockercompose
        displayName: build using docker
        pool:
          vmImage: ubuntu-22.04
        steps:
          - task: DockerCompose@0
            inputs:
              containerregistrytype: 'Azure Container Registry'
              dockerComposeFile: '**/docker-compose.yml'
              action: 'Build services'